<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissor</title>
        <link rel="stylesheet" href="RPS.css">
    </head>
    <body>
        <div class="Title">
            <h1>Rock Papper Scissor</h1>
            <h1>Game</h1>
        </div>
        <div class="ResultBanner">
            <p class="DefaultBanner"
            >Choose a move</p>
        </div>
        
        <div class ="Buttons">
            <button class ="actionButtons" onclick="ComputerMove('Rock', Math.random());">
                <img src="Imgs/RockImg.png"></button>
            <button class ="actionButtons" onclick="ComputerMove('Paper', Math.random());">
                <img src="Imgs/PapperImg.png"></button>
            <button class ="actionButtons" onclick="ComputerMove('Scissor', Math.random()); ">
                <img src="Imgs/ScissorImg.png"></button>
        </div>
        
        <div class="ResultHistory">
            <p>Win:0</p>
            <p>Tie:0</p>
            <P>Lost:0</P>

        </div>
        
        <div class="LeastPart">
            <button class="ResetButton" onclick="resetButton();">Reset</button>
        </div>
        
        <script>
            let userMove;
            let computerMove;
            let result;


            /*Storing the score in local storage so that it persists even after refreshing the page*/
            let score = JSON.parse(localStorage.getItem('score')) || /*Default ->*/{
                    Win:0, Tie:0, Loss:0
                };
            /*ComputerMove function to generate computer move based on random number*/
            function ComputerMove(u,c){
                userMove = u;
                if(c<1/3){
                    computerMove = 'Rock';
                }
                else if(c<2/3){
                    computerMove = 'Paper';
                }else{
                    computerMove = 'Scissor';
                }
                /* After generating Computer move and calling Result function to decide the result of the game*/
                Result(userMove, computerMove);

            }
            /*Function to update the banner status with result and moves*/
            function bannerStatus(u,c){
                let userMoveImg ;
                let comMoveImg ;

                if(u === 'Rock'){
                    userMoveImg = '<img src="Imgs/RockImg.png" style="width:60px;">';
                }else if(u === 'Paper'){
                    userMoveImg = '<img src="Imgs/PapperImg.png" style="width:60px;">';
                }else if(u === 'Scissor'){
                    userMoveImg = '<img src="Imgs/ScissorImg.png" style=" width:60px;">';
                }
                if(c === 'Rock'){
                    comMoveImg = '<img src="Imgs/RockImg.png" style="width:60px;">';
                }else if(c === 'Paper'){
                    comMoveImg = '<img src="Imgs/PapperImg.png" style=" width:60px;">';
                }else if(c === 'Scissor'){
                    comMoveImg = '<img src="Imgs/ScissorImg.png" style="width:60px;">';
                }
                /*Updating the banner with result and moves*/
                document.querySelector('.ResultBanner').innerHTML = `<p class="result">${result}</p><p>You :${userMoveImg}  ${comMoveImg}:Computer</p>`;
            }
            //Function to decide the result of the game depending on user move and computer move
            function Result(u, c){
                if(u===c){
                    result = 'Tie';
                }else if(u==='Rock' && c==='Paper'){
                    result = 'Loss';
                }else if(u==='Paper' && c==='Scissor'){
                    result = 'Loss';
                }else if(u==='Scissor' && c==='Rock'){
                    result = 'Loss';
                }else if(u==='Rock' && c==='Scissor'){
                    result = 'Win';
                }else if(u==='Paper' && c==='Rock'){
                    result = 'Win';
                }else if(u==='Scissor' && c==='Paper'){
                    result = 'Win';
                }
                
                if(result === 'Tie'){
                    score.Tie++;
                }else if(result === 'Loss'){
                    score.Loss++;
                }else if(result === 'Win'){
                    score.Win++;
                }
                //Calling display function to update the banner and history
                display(u, c, result);
            }
            //Function to display the result banner and history and strore the score in local storage
            function display(user, Computer){
                localStorage.setItem('score',JSON.stringify(score));
                bannerStatus(user, Computer);
                historyBanner();
            }
            //Function to update the history banner with score
            function historyBanner(){
                document.querySelector('.ResultHistory').innerHTML = `<p>Win:${score.Win}</p><p>Tie:${score.Tie}</p><p>Loss:${score.Loss}</p>`;
            }
            //Function to reset the score and history
            function resetButton(){
                score.Win=0;
                score.Tie=0;
                score.Loss=0; 
                localStorage.removeItem('score'); 
                historyBanner();
                document.querySelector('.ResultBanner').innerHTML = `<p> Score Reset</p>`;
            }

        </script>
    </body>
</html>


